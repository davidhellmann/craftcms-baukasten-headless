---
// export const prerender = true;
import "@/css/app.css";
import GlobalLayout from "@/layouts/Global.astro";
import { getEntryData } from "@/utils/getEntryData";
import { InferGetStaticParamsType, InferGetStaticPropsType } from "astro";

type Params = InferGetStaticParamsType<typeof getStaticPaths>;
type Props = InferGetStaticPropsType<typeof getStaticPaths>;

export async function getStaticPaths() {
  return await getEntryData("default");
}

const { uri } = Astro.params as Params;
const { entryId, siteHandle, siteId, sectionHandle, typeHandle, lang } =
  Astro.props as Props;

if (!uri) {
  Astro.response.status = 404;
  Astro.response.statusText = "Not found";
}
---

<GlobalLayout
  uri={uri}
  lang={lang}
  siteHandle={siteHandle}
  siteId={siteId}
  typeHandle={typeHandle}
  sectionHandle={sectionHandle}
  entryId={entryId}
/>
